env:
  global:
    - secure: mItYdbN2lPVCRwIPmP+oL1jglgt3rIiHlF7EGnubwuIbQOv9fvXEoNBdX24Kwk4nTnFW1RPE7wPya3rqdVzBGj6KqFlFnlTnXHfdR7nribiOWNudL6DMf+h2BzyODacM+LVXlgTxNjDB9Sd6PscaQzbtPzBLVUvURNey1yWrtec=
before_install:
  - yes | sudo add-apt-repository ppa:hansjorg/rust
  - yes | sudo add-apt-repository ppa:cmrx64/cargo
  - sudo apt-get update
  - git clone git://git.savannah.gnu.org/libjit.git
install:
  - sudo apt-get install cargo rust-nightly texinfo
  - cd libjit
  - ./auto_gen.sh
  - ./configure 
  - make
  - sudo make install
  - sudo cp /usr/local/lib/libjit* /usr/lib/
  - cd ..
script:
  - make clean build doc
notifications:
  email:
    - tophattedcoder@gmail.com
after_script:
  - curl http://www.rust-ci.org/artifacts/put?t=$RUSTCI_TOKEN | sh